(function(e){function t(t){for(var n,r,i=t[0],l=t[1],c=t[2],d=0,p=[];d<i.length;d++)r=i[d],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&p.push(o[r][0]),o[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(p.length)p.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],n=!0,i=1;i<a.length;i++){var l=a[i];0!==o[l]&&(n=!1)}n&&(s.splice(t--,1),e=r(r.s=a[0]))}return e}var n={},o={app:0},s=[];function r(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=n,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(a,n,function(t){return e[t]}.bind(null,n));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=l;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";a("85ec")},"0d9b":function(e,t,a){},1478:function(e,t,a){},"4c5e":function(e,t,a){"use strict";a("0d9b")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("router-view")],1)},s=[],r={name:"App"},i=r,l=(a("034f"),a("2877")),c=a("6544"),u=a.n(c),d=a("7496"),p=Object(l["a"])(i,o,s,!1,null,null,null),f=p.exports;u()(p,{VApp:d["a"]});var v=a("f309");n["a"].use(v["a"]);var m=new v["a"]({theme:{themes:{light:{primary:"#34A0B1",secondary:"#FFFFFF",accent:"#353B46"}}}}),g=(a("b0c0"),a("8c4f")),h=a("d4ec"),b=a("bee2"),_=function(){function e(){Object(h["a"])(this,e)}return Object(b["a"])(e,null,[{key:"check",value:function(){var e=this.getAuthData();return e&&e.token}},{key:"getToken",value:function(){return this.getAuthData().token}},{key:"getUser",value:function(){return this.getAuthData().user}},{key:"logout",value:function(e){var t=this;e?n["a"].swal({title:"Deseja realmente sair?",text:"Esta ação pode ser irreversível!",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sim! Sei o que estou fazendo",cancelButtonText:"Cancelar"}).then((function(e){e.value&&t.clearSession()})):this.clearSession()}},{key:"clearSession",value:function(){localStorage.clear(),location.href="/login",window.location.reload()}},{key:"getAuthData",value:function(){var e=this.getAuthDataDecoded();return e?JSON.parse(e):e}},{key:"getAuthDataDecoded",value:function(){var e=localStorage.getItem("token");return!!e&&atob(atob(e))}}]),e}(),x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{staticClass:"login"},[a("v-container",[a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{cols:"12",sm:"8",md:"6",lg:"4"}},[a("v-card",{staticClass:"elevation-20",attrs:{tile:""}},[a("v-card-text",[a("div",{staticClass:"login__content"},[a("v-img",{attrs:{src:"assets/logo/logo-dealer-sites.png"}}),a("h2",[e._v("Teste Tecnico Developer")]),a("div",{staticClass:"login__credentials"},[a("strong",[e._v("Use os dados abaixo para fazer login:")]),a("br"),e._v(" Login: "),a("code",[e._v("teste@dealersites.com.br")]),a("br"),e._v(" Senha: "),a("code",[e._v("DealerSites@2020")])]),a("v-form",{ref:"login",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("div",{staticClass:"login__input"},[a("v-text-field",{attrs:{label:"Login",placeholder:"Insira seu login",rules:[function(e){return!!e||"O login é obrigatório"}],outlined:"","prepend-inner-icon":"person",autofocus:""},model:{value:e.login.username,callback:function(t){e.$set(e.login,"username",t)},expression:"login.username"}})],1),a("div",{staticClass:"login__input"},[a("v-text-field",{attrs:{label:"Senha",placeholder:"Insira sua senha",rules:[function(e){return!!e||"A senha é obrigatória"}],outlined:"","prepend-inner-icon":"vpn_key",type:e.showPassword?"text":"password","append-icon":e.showPassword?"visibility":"visibility_off"},on:{"click:append":function(t){e.showPassword=!e.showPassword},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.validateLogin()}},model:{value:e.login.password,callback:function(t){e.$set(e.login,"password",t)},expression:"login.password"}})],1)]),a("div",{staticClass:"login__button"},[a("v-btn",{attrs:{color:"primary",disabled:!e.valid,loading:e.loading,block:""},on:{click:function(t){return e.validateLogin()}}},[e._v("Acessar")])],1)],1)])],1)],1)],1)],1)],1)},w=[],y=a("5530"),k=a("2f62"),S={name:"Login",data:function(){return{valid:!1,login:{username:"",password:null},showPassword:!1}},computed:Object(y["a"])({},Object(k["b"])(["loading"])),methods:{validateLogin:function(){this.$refs.login.validate()&&this.executeLogin()},executeLogin:function(){var e=this;this.$store.dispatch("Login/executes",this.login).then((function(){return e.$router.push({name:"home"})})).catch((function(){return e.loginError()}))},loginError:function(){this.login.password=null,this.$swal({icon:"warning",title:"Usuário não existe ou senha inválida!",text:"Tente novamente ou contacte o suporte."})}}},O=S,T=(a("699c"),a("8336")),V=a("b0af"),C=a("99d9"),j=a("62ad"),A=a("a523"),E=a("4bd4"),U=a("adda"),$=a("0fd9"),P=a("8654"),D=Object(l["a"])(O,x,w,!1,null,"013bcd04",null),I=D.exports;u()(D,{VApp:d["a"],VBtn:T["a"],VCard:V["a"],VCardText:C["b"],VCol:j["a"],VContainer:A["a"],VForm:E["a"],VImg:U["a"],VRow:$["a"],VTextField:P["a"]});var L=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-app-bar",{attrs:{app:"","inverted-scroll":!1}},[a("v-toolbar-title",{on:{click:function(t){e.window.location.href="/"}}},[a("v-img",{attrs:{src:"/assets/logo/logo-dealer-sites.png",width:"150"}})],1),a("v-spacer"),a("v-toolbar-title",{staticClass:"main__toolbar-title",on:{click:function(t){e.window.location.href="/"}}},[e._v(" Teste Tecnico Developer ")]),a("v-progress-linear",{attrs:{active:e.loading,indeterminate:e.loading,absolute:"",bottom:"",color:"primary"}}),a("v-spacer"),a("v-btn",{attrs:{text:"",link:"",to:{name:"home"}}},[a("v-icon",[e._v("home")]),a("span",[e._v("Home")])],1),a("v-btn",{attrs:{text:""},on:{click:function(t){return e.logout()}}},[a("v-icon",[e._v("exit_to_app")]),a("span",[e._v("Sair")])],1)],1),a("v-main",[a("router-view")],1)],1)},F=[],R={name:"Main",computed:Object(y["a"])({},Object(k["b"])(["loading"])),methods:{logout:function(){_.logout("showAsk")}}},B=R,M=(a("61d9"),a("40dc")),N=a("132d"),z=a("f6c4"),G=a("8e36"),H=a("2fa4"),q=a("2a7f"),J=Object(l["a"])(B,L,F,!1,null,"7de13bf1",null),W=J.exports;u()(J,{VApp:d["a"],VAppBar:M["a"],VBtn:T["a"],VIcon:N["a"],VImg:U["a"],VMain:z["a"],VProgressLinear:G["a"],VSpacer:H["a"],VToolbarTitle:q["a"]});var Y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h1",[e._v("Home - "+e._s(e.loading))])},K=[],Q={name:"Home",computed:Object(y["a"])({},Object(k["b"])(["loading"])),mounted:function(){this.$api.get("users/user").then((function(e){console.log(e)}))}},X=Q,Z=Object(l["a"])(X,Y,K,!1,null,null,null),ee=Z.exports,te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{cols:"12",sm:"12",md:"10",lg:"10"}},[a("UsersFilters")],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"10",lg:"10"}},[a("UsersTable")],1)],1)],1)},ae=[],ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"elevation-20",attrs:{tile:""}},[a("v-data-table",{staticClass:"elevation-20",attrs:{options:e.options,"server-items-length":e.totalUsers,headers:e.headers,items:e.users,loading:e.loading,page:e.params.page,"items-per-page":e.params.perPage,"fixed-header":!0,height:"400","footer-props.prev-icon":"navigate_before","footer-props.next-icon":"navigate_next","footer.page-text":"Por página","loading-text":"Buscando usuários... Por favor aguarde.","items-per-page-all-text":"Usuários por página","footer-props":{showFirstLastPage:!0,firstIcon:"first_page",lastIcon:"last_page",prevIcon:"navigate_before",nextIcon:"navigate_next","items-per-page-text":"Usuários por página","items-per-page-options":[10,20,30,100]}},on:{"update:options":function(t){e.options=t},"update:page":function(t){return e.$set(e.params,"page",t)}},scopedSlots:e._u([{key:"item.name",fn:function(t){var n=t.item;return[a("strong",[e._v(e._s(n.name))])]}},{key:"item.logins",fn:function(t){var n=t.item;return[a("strong",{staticClass:"users-table__logins"},[e._v(e._s(n.logins))])]}},{key:"item.active",fn:function(t){var n=t.item;return[n.active?a("span",{staticClass:"users-table__active users-table__active--true"},[e._v("Ativo")]):a("span",{staticClass:"users-table__active users-table__active--false"},[e._v("Inativo")])]}},{key:"footer.page-text",fn:function(t){var a=t.pageStart,n=t.pageStop,o=t.itemsLength;return[e._v(" "+e._s(a)+" a "+e._s(n)+" de "+e._s(o)+" ")]}}])})],1)},oe=[],se={name:"UsersTable",data:function(){return{headers:[{text:"Nome",value:"name"},{text:"Email",value:"email",sortable:!1},{text:"Número de logins",value:"logins",sortable:!0,align:"center"},{text:"Situação",value:"active",sortable:!1,align:"center"}],options:{}}},computed:Object(y["a"])(Object(y["a"])({},Object(k["b"])(["loading"])),Object(k["b"])("Users",["users","totalUsers","params"])),watch:{options:{handler:function(){var e={};e["perPage"]=this.options.itemsPerPage,e["page"]=this.options.page,this.options.sortBy.length>0&&(e["order"]=this.options.sortBy[0]),this.options.sortDesc.length>0&&(e["order"]+=this.options.sortDesc[0]?",desc":",asc"),console.log(e),this.$store.commit("Users/SET_PARAMS",e),this.$store.dispatch("Users/get")},deep:!0}}},re=se,ie=(a("57fd"),a("8fea")),le=Object(l["a"])(re,ne,oe,!1,null,"b909b546",null),ce=le.exports;u()(le,{VCard:V["a"],VDataTable:ie["a"]});var ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"elevation-20",attrs:{tile:""}},[a("v-card-actions",[a("h2",[e._v("Filtros")]),a("v-spacer"),e.show?a("v-btn",{attrs:{outlined:""},on:{click:function(t){e.show=!e.show}}},[e._v(" Ocultar filtros ")]):a("v-btn",{attrs:{outlined:""},on:{click:function(t){e.show=!e.show}}},[e._v(" Exibir filtros ")])],1),a("v-scroll-y-transition",[e.show?a("div",[a("v-divider"),a("v-card-text",{staticClass:"users-filters__content"},[a("v-row",[a("v-col",{staticClass:"users-filters__content-col",attrs:{cols:"12",sm:"12",md:"4",lg:"4",xl:"4"}},[a("v-text-field",{attrs:{label:"Pesquise por nome",placeholder:"Insira o nome do usuário",outlined:"",dense:"","prepend-inner-icon":"person",disabled:e.loading},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1),a("v-col",{staticClass:"users-filters__content-col",attrs:{cols:"12",sm:"12",md:"4",lg:"4",xl:"4"}},[a("v-text-field",{attrs:{label:"Data inicial",outlined:"",dense:"","prepend-inner-icon":"today",type:"datetime-local",disabled:e.loading},model:{value:e.filters.start_date,callback:function(t){e.$set(e.filters,"start_date",t)},expression:"filters.start_date"}}),a("v-text-field",{attrs:{label:"Data final",outlined:"",dense:"","prepend-inner-icon":"event",type:"datetime-local",disabled:e.loading},model:{value:e.filters.end_date,callback:function(t){e.$set(e.filters,"end_date",t)},expression:"filters.end_date"}})],1),a("v-col",{staticClass:"users-filters__content-col",attrs:{cols:"12",sm:"12",md:"4",lg:"4",xl:"4"}},[a("v-item-group",{attrs:{mandatory:""},model:{value:e.filters.loginTop,callback:function(t){e.$set(e.filters,"loginTop",t)},expression:"filters.loginTop"}},[a("v-container",{staticClass:"user-filters__login-top"},[a("v-row",[a("v-col",{staticClass:"user-filters__login-top-col-top",attrs:{cols:"12"}},[a("v-item",{attrs:{value:"more"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.active,o=t.toggle;return[a("v-btn",{staticClass:"user-filters__button-10",class:{"white--text":n},attrs:{block:"",color:"grey",large:"",outlined:!n},on:{click:o}},[e._v("Top 10 mais fizeram login ")])]}}],null,!1,2118421704)})],1),a("v-col",{staticClass:"user-filters__login-top-col-bottom",attrs:{cols:"12"}},[a("v-item",{attrs:{value:"minus"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.active,o=t.toggle;return[a("v-btn",{staticClass:"user-filters__button-10",class:{"white--text":n},attrs:{block:"",color:"grey",large:"",outlined:!n},on:{click:o}},[e._v("Top 10 menos fizeram login")])]}}],null,!1,2572414436)})],1)],1)],1)],1)],1)],1)],1),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{outlined:"",color:"red"},on:{click:function(t){return e.clearFilters()}}},[e._v("Limpar Filtros")]),a("v-btn",{attrs:{outlined:"",color:"primary",disabled:!e.filtersIsValid(),loading:e.loading},on:{click:function(t){return e.aplyFilters()}}},[e._v("Aplicar Filtros")])],1)],1):e._e()])],1)},de=[],pe={name:"UsersFilters",data:function(){return{show:!1,filters:{loginTop:void 0}}},computed:Object(y["a"])(Object(y["a"])({},Object(k["b"])(["loading"])),Object(k["b"])("Users",["users"])),methods:{aplyFilters:function(){console.log(this.filters),this.$store.commit("Users/SET_PARAMS",this.filters),this.$store.dispatch("Users/get")},clearFilters:function(){this.$store.commit("Users/REMOVE_PARAMS",this.filters),this.$store.commit("Users/SET_PARAMS",{page:1}),this.filters={},this.$store.dispatch("Users/get")},filtersIsValid:function(){var e=this.filters;return console.log(void 0!=e.name||void 0!=e.loginTop||void 0!=e.start_date&&void 0!=e.end_date||!1),void 0!=e.name||void 0!=e.loginTop||void 0!=e.start_date&&void 0!=e.end_date||!1}}},fe=pe,ve=(a("4c5e"),a("ce7e")),me=a("d903"),ge=a("604c"),he=a("0789"),be=Object(l["a"])(fe,ue,de,!1,null,"81ee0b3c",null),_e=be.exports;u()(be,{VBtn:T["a"],VCard:V["a"],VCardActions:C["a"],VCardText:C["b"],VCol:j["a"],VContainer:A["a"],VDivider:ve["a"],VItem:me["a"],VItemGroup:ge["b"],VRow:$["a"],VScrollYTransition:he["d"],VSpacer:H["a"],VTextField:P["a"]});var xe={name:"Users",computed:Object(y["a"])({},Object(k["b"])("Users",["users"])),components:{UsersTable:ce,UsersFilters:_e}},we=xe,ye=(a("fa7f"),Object(l["a"])(we,te,ae,!1,null,"7fcdc464",null)),ke=ye.exports;u()(ye,{VCol:j["a"],VContainer:A["a"],VRow:$["a"]}),n["a"].use(g["a"]);var Se=[{path:"*",redirect:"/main/home"},{path:"/login",name:"login",component:I,meta:{auth:!1,title:"Login"},beforeEnter:function(e,t,a){_.check()?a({name:"home"}):a()}},{path:"/main",name:"main",component:W,redirect:"/home",meta:{auth:!0},children:[{path:"home",name:"home",component:ee,meta:{auth:!0,title:"Home"}},{path:"users",name:"users",component:ke,meta:{auth:!0,title:"Users"}},{path:"table",name:"table",component:W,meta:{auth:!0,title:"Table"}}]}],Oe=new g["a"]({routes:Se});Oe.beforeEach((function(e,t,a){Te(e),Ve(e)?a({name:"login"}):a()}));var Te=function(e){document.title="".concat(e.meta.title||"App"," - Dealer Sites")},Ve=function(e){return"login"!==e.name&&e.meta.auth&&!_.check()},Ce=Oe,je=(a("d3b7"),{namespaced:!0,state:{test:"Hello World!"},actions:{executes:function(e,t){var a=e.dispatch;return new Promise((function(e,o){n["a"].prototype.$api.post("login/auth",t).then((function(t){return a("credentialsIsValid",t.data)?e():o()})).catch((function(){return o()}))}))},credentialsIsValid:function(e,t){var a=e.dispatch;return!(!t||"success"!==t.status)&&a("saveCredentials",t.data)},saveCredentials:function(e,t){return localStorage.setItem("token",t.token)}}}),Ae={namespaced:!0,state:{users:[],totalUsers:0,params:{page:1,perPage:10}},mutations:{SET_USERS:function(e,t){e.users=t},SET_TOTAL_USERS:function(e,t){e.totalUsers=t},SET_PARAMS:function(e,t){for(var a in t)e.params[a]=t[a]},REMOVE_PARAMS:function(e,t){for(var a in t)delete e.params[a]}},actions:{get:function(e){var t=e.state,a=e.commit;n["a"].prototype.$api.get("users/user",{params:t.params}).then((function(e){a("SET_USERS",e.data.data),a("SET_TOTAL_USERS",e.data.total)}))}}};n["a"].use(k["a"]);var Ee=new k["a"].Store({state:{loading:!1},mutations:{SET_LOADING:function(e,t){e.loading=t}},modules:{Login:je,Users:Ae}}),Ue=Ee,$e=a("bc3a"),Pe=a.n($e);n["a"].use({install:function(e){e.prototype.$api=Pe.a.create({baseURL:"/api/v1/"}),e.prototype.$api.interceptors.request.use((function(e){var t=_.getToken();return t&&(e.headers["token"]=t),Ue.commit("SET_LOADING",!0),e})),e.prototype.$api.interceptors.response.use((function(e){return Ue.commit("SET_LOADING",!1),e}),(function(e){return Ue.commit("SET_LOADING",!1),e}))}});var De={},Ie=a("5886");a("4413");n["a"].use(Ie["default"]);var Le={};n["a"].config.productionTip=!1,new n["a"]({vuetify:m,router:Ce,store:Ue,axios:De,sweetalert:Le,render:function(e){return e(f)}}).$mount("#app")},"57fd":function(e,t,a){"use strict";a("8fbd")},"61d9":function(e,t,a){"use strict";a("87c5")},"699c":function(e,t,a){"use strict";a("1478")},"85ec":function(e,t,a){},"87c5":function(e,t,a){},"8fbd":function(e,t,a){},d7bd:function(e,t,a){},fa7f:function(e,t,a){"use strict";a("d7bd")}});
//# sourceMappingURL=app.10044ea4.js.map